{"remainingRequest":"C:\\Users\\HP\\Desktop\\live-chat\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\HP\\Desktop\\live-chat\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\HP\\Desktop\\live-chat\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\HP\\Desktop\\live-chat\\src\\components\\ChatWindow.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\HP\\Desktop\\live-chat\\src\\components\\ChatWindow.vue","mtime":1636991553944},{"path":"C:\\Users\\HP\\Desktop\\live-chat\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\HP\\Desktop\\live-chat\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\HP\\Desktop\\live-chat\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\HP\\Desktop\\live-chat\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1628298225000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiQzovVXNlcnMvSFAvRGVza3RvcC9saXZlLWNoYXQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0IHsgY29tcHV0ZWQsIHJlZiB9IGZyb20gJ0B2dWUvcmVhY3Rpdml0eSc7CmltcG9ydCB7IGRiIH0gZnJvbSAnLi4vZmlyZWJhc2UvY29uZmlnJzsKaW1wb3J0IHsgZm9ybWF0RGlzdGFuY2VUb05vdyB9IGZyb20gImRhdGUtZm5zIjsKaW1wb3J0IHsgb25VcGRhdGVkIH0gZnJvbSAnQHZ1ZS9ydW50aW1lLWNvcmUnOwpleHBvcnQgZGVmYXVsdCB7CiAgc2V0dXA6IGZ1bmN0aW9uIHNldHVwKCkgewogICAgdmFyIG1lc3NhZ2VzID0gcmVmKFtdKTsKICAgIHZhciBtc2dCb3ggPSByZWYobnVsbCk7IC8vYXV0byBzY3JvbGxpbmcgZmVhdHVyZQoKICAgIG9uVXBkYXRlZChmdW5jdGlvbiAoKSB7CiAgICAgIG1zZ0JveC52YWx1ZS5zY3JvbGxUb3A7CiAgICB9KTsKICAgIHZhciBmb3JtYXR0ZWRNZXNzYWdlcyA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIG1lc3NhZ2VzLnZhbHVlLm1hcChmdW5jdGlvbiAobXNnKSB7CiAgICAgICAgdmFyIGZvcm1hdFRpbWUgPSBmb3JtYXREaXN0YW5jZVRvTm93KG1zZy5jcmVhdGVkX2F0LnRvRGF0ZSgpKTsKICAgICAgICByZXR1cm4gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBtc2cpLCB7fSwgewogICAgICAgICAgY3JlYXRlZF9hdDogZm9ybWF0VGltZQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0pOwogICAgZGIuY29sbGVjdGlvbigibWVzc2FnZXMiKS5vcmRlckJ5KCJjcmVhdGVkX2F0Iikub25TbmFwc2hvdChmdW5jdGlvbiAoc25hcCkgewogICAgICB2YXIgcmVzdWx0cyA9IFtdOwogICAgICBzbmFwLmRvY3MuZm9yRWFjaChmdW5jdGlvbiAoZG9jKSB7CiAgICAgICAgdmFyIGRvY3VtZW50ID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBkb2MuZGF0YSgpKSwge30sIHsKICAgICAgICAgIGlkOiBkb2MuaWQKICAgICAgICB9KTsKCiAgICAgICAgZG9jLmRhdGEoKS5jcmVhdGVkX2F0ICYmIHJlc3VsdHMucHVzaChkb2N1bWVudCk7CiAgICAgIH0pOwogICAgICBtZXNzYWdlcy52YWx1ZSA9IHJlc3VsdHM7CiAgICB9KTsKICAgIHJldHVybiB7CiAgICAgIG1lc3NhZ2VzOiBtZXNzYWdlcywKICAgICAgZm9ybWF0dGVkTWVzc2FnZXM6IGZvcm1hdHRlZE1lc3NhZ2VzLAogICAgICBtc2dCb3g6IG1zZ0JveAogICAgfTsKICB9Cn07"},{"version":3,"sources":["C:\\Users\\HP\\Desktop\\live-chat\\src\\components\\ChatWindow.vue"],"names":[],"mappings":";;;AAaA,SAAS,QAAT,EAAmB,GAAnB,QAA8B,iBAA9B;AACA,SAAQ,EAAR,QAAiB,oBAAjB;AACA,SAAQ,mBAAR,QAAkC,UAAlC;AACA,SAAS,SAAT,QAA0B,mBAA1B;AACA,eAAe;AACX,EAAA,KADW,mBACJ;AACH,QAAI,QAAQ,GAAC,GAAG,CAAC,EAAD,CAAhB;AACA,QAAI,MAAM,GAAC,GAAG,CAAC,IAAD,CAAd,CAFG,CAIH;;AACA,IAAA,SAAS,CAAC,YAAI;AACV,MAAA,MAAM,CAAC,KAAP,CAAa,SAAb;AACH,KAFQ,CAAT;AAMA,QAAI,iBAAiB,GAAC,QAAQ,CAAC,YAAI;AAC/B,aAAO,QAAQ,CAAC,KAAT,CAAe,GAAf,CAAmB,UAAC,GAAD,EAAO;AAC7B,YAAI,UAAU,GAAC,mBAAmB,CAAC,GAAG,CAAC,UAAJ,CAAe,MAAf,EAAD,CAAlC;AACA,+CAAU,GAAV;AAAc,UAAA,UAAU,EAAC;AAAzB;AACH,OAHM,CAAP;AAIH,KAL6B,CAA9B;AAMA,IAAA,EAAE,CAAC,UAAH,CAAc,UAAd,EAA0B,OAA1B,CAAkC,YAAlC,EAAgD,UAAhD,CAA2D,UAAC,IAAD,EAAQ;AAC/D,UAAI,OAAO,GAAC,EAAZ;AACA,MAAA,IAAI,CAAC,IAAL,CAAU,OAAV,CAAkB,UAAC,GAAD,EAAO;AACrB,YAAI,QAAQ,mCAAK,GAAG,CAAC,IAAJ,EAAL;AAAgB,UAAA,EAAE,EAAC,GAAG,CAAC;AAAvB,UAAZ;;AACA,QAAA,GAAG,CAAC,IAAJ,GAAW,UAAX,IAAyB,OAAO,CAAC,IAAR,CAAa,QAAb,CAAzB;AACH,OAHD;AAIA,MAAA,QAAQ,CAAC,KAAT,GAAiB,OAAjB;AACH,KAPD;AAQA,WAAO;AAAC,MAAA,QAAQ,EAAR,QAAD;AAAU,MAAA,iBAAiB,EAAjB,iBAAV;AAA4B,MAAA,MAAM,EAAN;AAA5B,KAAP;AACJ;AA3BW,CAAf","sourcesContent":["<template>\r\n  <div class=\"chat-window\">\r\n      <div class=\"messages\" ref=\"msgBox\">\r\n          <div class=\"single\" v-for=\"message in formattedMessages\" :key=\"message.id\">\r\n              <span class=\"created-at\">{{message.created_at}}</span>\r\n              <span class=\"name\">{{message.name}}</span>\r\n              <span class=\"mesage\">{{message.message}}</span>\r\n          </div>\r\n        </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { computed, ref } from '@vue/reactivity'\r\nimport {db} from '../firebase/config'\r\nimport {formatDistanceToNow} from \"date-fns\"\r\nimport { onUpdated } from '@vue/runtime-core'\r\nexport default {\r\n    setup(){\r\n        let messages=ref([]);\r\n        let msgBox=ref(null);\r\n\r\n        //auto scrolling feature\r\n        onUpdated(()=>{\r\n            msgBox.value.scrollTop\r\n        })\r\n\r\n\r\n\r\n        let formattedMessages=computed(()=>{\r\n            return messages.value.map((msg)=>{\r\n                let formatTime=formatDistanceToNow(msg.created_at.toDate())\r\n                return{...msg,created_at:formatTime}\r\n            })\r\n        })\r\n        db.collection(\"messages\").orderBy(\"created_at\").onSnapshot((snap)=>{\r\n            let results=[];\r\n            snap.docs.forEach((doc)=>{\r\n                let document={...doc.data(),id:doc.id}\r\n                doc.data().created_at && results.push(document);\r\n            })\r\n            messages.value = results;\r\n        })\r\n        return {messages,formattedMessages,msgBox};\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n.chat-window{\r\n    background: #fafafa;\r\n    padding: 30px 20px;\r\n}\r\n.single{\r\n    margin:18px 0;\r\n}\r\n.created-at{\r\n    display: block;\r\n    color: #999;\r\n    font-size: 12px;\r\n    margin-bottom: 4px;\r\n}\r\n.name{\r\n    font-weight: bold;\r\n    margin-right: 6px;\r\n}\r\n.messages{\r\n    max-height: 400px;\r\n    overflow: auto;\r\n}\r\n</style>"],"sourceRoot":""}]}