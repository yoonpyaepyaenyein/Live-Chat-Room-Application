{"remainingRequest":"C:\\Users\\HP\\Desktop\\live-chat\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\HP\\Desktop\\live-chat\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\HP\\Desktop\\live-chat\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\HP\\Desktop\\live-chat\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\HP\\Desktop\\live-chat\\src\\components\\ChatWindow.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\HP\\Desktop\\live-chat\\src\\components\\ChatWindow.vue","mtime":1636991567192},{"path":"C:\\Users\\HP\\Desktop\\live-chat\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\HP\\Desktop\\live-chat\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\HP\\Desktop\\live-chat\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\HP\\Desktop\\live-chat\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\HP\\Desktop\\live-chat\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1628298225000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiQzovVXNlcnMvSFAvRGVza3RvcC9saXZlLWNoYXQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0IHsgY29tcHV0ZWQsIHJlZiB9IGZyb20gJ0B2dWUvcmVhY3Rpdml0eSc7CmltcG9ydCB7IGRiIH0gZnJvbSAnLi4vZmlyZWJhc2UvY29uZmlnJzsKaW1wb3J0IHsgZm9ybWF0RGlzdGFuY2VUb05vdyB9IGZyb20gImRhdGUtZm5zIjsKaW1wb3J0IHsgb25VcGRhdGVkIH0gZnJvbSAnQHZ1ZS9ydW50aW1lLWNvcmUnOwpleHBvcnQgZGVmYXVsdCB7CiAgc2V0dXA6IGZ1bmN0aW9uIHNldHVwKCkgewogICAgdmFyIG1lc3NhZ2VzID0gcmVmKFtdKTsKICAgIHZhciBtc2dCb3ggPSByZWYobnVsbCk7IC8vYXV0byBzY3JvbGxpbmcgZmVhdHVyZQoKICAgIG9uVXBkYXRlZChmdW5jdGlvbiAoKSB7CiAgICAgIG1zZ0JveC52YWx1ZS5zY3JvbGxUb3AgPSBtc2dCb3gudmFsdWUuc2Nyb2xsSGVpZ2h0OwogICAgfSk7CiAgICB2YXIgZm9ybWF0dGVkTWVzc2FnZXMgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBtZXNzYWdlcy52YWx1ZS5tYXAoZnVuY3Rpb24gKG1zZykgewogICAgICAgIHZhciBmb3JtYXRUaW1lID0gZm9ybWF0RGlzdGFuY2VUb05vdyhtc2cuY3JlYXRlZF9hdC50b0RhdGUoKSk7CiAgICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbXNnKSwge30sIHsKICAgICAgICAgIGNyZWF0ZWRfYXQ6IGZvcm1hdFRpbWUKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9KTsKICAgIGRiLmNvbGxlY3Rpb24oIm1lc3NhZ2VzIikub3JkZXJCeSgiY3JlYXRlZF9hdCIpLm9uU25hcHNob3QoZnVuY3Rpb24gKHNuYXApIHsKICAgICAgdmFyIHJlc3VsdHMgPSBbXTsKICAgICAgc25hcC5kb2NzLmZvckVhY2goZnVuY3Rpb24gKGRvYykgewogICAgICAgIHZhciBkb2N1bWVudCA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgZG9jLmRhdGEoKSksIHt9LCB7CiAgICAgICAgICBpZDogZG9jLmlkCiAgICAgICAgfSk7CgogICAgICAgIGRvYy5kYXRhKCkuY3JlYXRlZF9hdCAmJiByZXN1bHRzLnB1c2goZG9jdW1lbnQpOwogICAgICB9KTsKICAgICAgbWVzc2FnZXMudmFsdWUgPSByZXN1bHRzOwogICAgfSk7CiAgICByZXR1cm4gewogICAgICBtZXNzYWdlczogbWVzc2FnZXMsCiAgICAgIGZvcm1hdHRlZE1lc3NhZ2VzOiBmb3JtYXR0ZWRNZXNzYWdlcywKICAgICAgbXNnQm94OiBtc2dCb3gKICAgIH07CiAgfQp9Ow=="},{"version":3,"sources":["C:\\Users\\HP\\Desktop\\live-chat\\src\\components\\ChatWindow.vue"],"names":[],"mappings":";;;AAaA,SAAS,QAAT,EAAmB,GAAnB,QAA8B,iBAA9B;AACA,SAAQ,EAAR,QAAiB,oBAAjB;AACA,SAAQ,mBAAR,QAAkC,UAAlC;AACA,SAAS,SAAT,QAA0B,mBAA1B;AACA,eAAe;AACX,EAAA,KADW,mBACJ;AACH,QAAI,QAAQ,GAAC,GAAG,CAAC,EAAD,CAAhB;AACA,QAAI,MAAM,GAAC,GAAG,CAAC,IAAD,CAAd,CAFG,CAIH;;AACA,IAAA,SAAS,CAAC,YAAI;AACV,MAAA,MAAM,CAAC,KAAP,CAAa,SAAb,GAAuB,MAAM,CAAC,KAAP,CAAa,YAApC;AACH,KAFQ,CAAT;AAMA,QAAI,iBAAiB,GAAC,QAAQ,CAAC,YAAI;AAC/B,aAAO,QAAQ,CAAC,KAAT,CAAe,GAAf,CAAmB,UAAC,GAAD,EAAO;AAC7B,YAAI,UAAU,GAAC,mBAAmB,CAAC,GAAG,CAAC,UAAJ,CAAe,MAAf,EAAD,CAAlC;AACA,+CAAU,GAAV;AAAc,UAAA,UAAU,EAAC;AAAzB;AACH,OAHM,CAAP;AAIH,KAL6B,CAA9B;AAMA,IAAA,EAAE,CAAC,UAAH,CAAc,UAAd,EAA0B,OAA1B,CAAkC,YAAlC,EAAgD,UAAhD,CAA2D,UAAC,IAAD,EAAQ;AAC/D,UAAI,OAAO,GAAC,EAAZ;AACA,MAAA,IAAI,CAAC,IAAL,CAAU,OAAV,CAAkB,UAAC,GAAD,EAAO;AACrB,YAAI,QAAQ,mCAAK,GAAG,CAAC,IAAJ,EAAL;AAAgB,UAAA,EAAE,EAAC,GAAG,CAAC;AAAvB,UAAZ;;AACA,QAAA,GAAG,CAAC,IAAJ,GAAW,UAAX,IAAyB,OAAO,CAAC,IAAR,CAAa,QAAb,CAAzB;AACH,OAHD;AAIA,MAAA,QAAQ,CAAC,KAAT,GAAiB,OAAjB;AACH,KAPD;AAQA,WAAO;AAAC,MAAA,QAAQ,EAAR,QAAD;AAAU,MAAA,iBAAiB,EAAjB,iBAAV;AAA4B,MAAA,MAAM,EAAN;AAA5B,KAAP;AACJ;AA3BW,CAAf","sourcesContent":["<template>\r\n  <div class=\"chat-window\">\r\n      <div class=\"messages\" ref=\"msgBox\">\r\n          <div class=\"single\" v-for=\"message in formattedMessages\" :key=\"message.id\">\r\n              <span class=\"created-at\">{{message.created_at}}</span>\r\n              <span class=\"name\">{{message.name}}</span>\r\n              <span class=\"mesage\">{{message.message}}</span>\r\n          </div>\r\n        </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { computed, ref } from '@vue/reactivity'\r\nimport {db} from '../firebase/config'\r\nimport {formatDistanceToNow} from \"date-fns\"\r\nimport { onUpdated } from '@vue/runtime-core'\r\nexport default {\r\n    setup(){\r\n        let messages=ref([]);\r\n        let msgBox=ref(null);\r\n\r\n        //auto scrolling feature\r\n        onUpdated(()=>{\r\n            msgBox.value.scrollTop=msgBox.value.scrollHeight\r\n        })\r\n\r\n\r\n\r\n        let formattedMessages=computed(()=>{\r\n            return messages.value.map((msg)=>{\r\n                let formatTime=formatDistanceToNow(msg.created_at.toDate())\r\n                return{...msg,created_at:formatTime}\r\n            })\r\n        })\r\n        db.collection(\"messages\").orderBy(\"created_at\").onSnapshot((snap)=>{\r\n            let results=[];\r\n            snap.docs.forEach((doc)=>{\r\n                let document={...doc.data(),id:doc.id}\r\n                doc.data().created_at && results.push(document);\r\n            })\r\n            messages.value = results;\r\n        })\r\n        return {messages,formattedMessages,msgBox};\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n.chat-window{\r\n    background: #fafafa;\r\n    padding: 30px 20px;\r\n}\r\n.single{\r\n    margin:18px 0;\r\n}\r\n.created-at{\r\n    display: block;\r\n    color: #999;\r\n    font-size: 12px;\r\n    margin-bottom: 4px;\r\n}\r\n.name{\r\n    font-weight: bold;\r\n    margin-right: 6px;\r\n}\r\n.messages{\r\n    max-height: 400px;\r\n    overflow: auto;\r\n}\r\n</style>"],"sourceRoot":""}]}