(function(e){function t(t){for(var n,c,u=t[0],l=t[1],i=t[2],p=0,m=[];p<u.length;p++)c=u[p],Object.prototype.hasOwnProperty.call(o,c)&&o[c]&&m.push(o[c][0]),o[c]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);s&&s(t);while(m.length)m.shift()();return a.push.apply(a,i||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],n=!0,u=1;u<r.length;u++){var l=r[u];0!==o[l]&&(n=!1)}n&&(a.splice(t--,1),e=c(c.s=r[0]))}return e}var n={},o={app:0},a=[];function c(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.m=e,c.c=n,c.d=function(e,t,r){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(r,n,function(t){return e[t]}.bind(null,n));return r},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var i=0;i<u.length;i++)t(u[i]);var s=l;a.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"140f":function(e,t,r){"use strict";r("bb9e")},"150b":function(e,t,r){},"171b":function(e,t,r){"use strict";r("e51e")},"28eb":function(e,t,r){},"45ba":function(e,t,r){"use strict";r("28eb")},4893:function(e,t,r){"use strict";r("8d0f")},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("7a23");function o(e,t){var r=Object(n["resolveComponent"])("router-view");return Object(n["openBlock"])(),Object(n["createBlock"])(r)}r("4893");const a={};a.render=o;var c=a,u=r("6c02"),l={class:"welcome container"},i={key:0},s=Object(n["createTextVNode"])("not a member?"),p={key:1},m=Object(n["createTextVNode"])("already member?");function b(e,t,r,o,a,c){var u=Object(n["resolveComponent"])("Login"),b=Object(n["resolveComponent"])("SignUp");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",l,[o.showLoginForm?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",i,[Object(n["createVNode"])(u,{onEnterChatroom:o.enterChatroom},null,8,["onEnterChatroom"]),Object(n["createElementVNode"])("p",null,[s,Object(n["createElementVNode"])("span",{onClick:t[0]||(t[0]=function(e){return o.showLoginForm=!o.showLoginForm})},"create account")])])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",p,[Object(n["createVNode"])(b,{onEnterChatroom:o.enterChatroom},null,8,["onEnterChatroom"]),Object(n["createElementVNode"])("p",null,[m,Object(n["createElementVNode"])("span",{onClick:t[1]||(t[1]=function(e){return o.showLoginForm=!o.showLoginForm})},"login account")])]))])}var d=r("a1e9"),f=Object(n["createElementVNode"])("h2",null,"Login",-1),v={key:0,class:"error"},O=Object(n["createElementVNode"])("button",null,"Login",-1);function j(e,t,r,o,a,c){return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,[f,Object(n["createElementVNode"])("form",{onSubmit:t[2]||(t[2]=Object(n["withModifiers"])((function(){return o.login&&o.login.apply(o,arguments)}),["prevent"]))},[Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{type:"email",placeholder:"email","onUpdate:modelValue":t[0]||(t[0]=function(e){return o.email=e})},null,512),[[n["vModelText"],o.email]]),Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{type:"password",placeholder:"password","onUpdate:modelValue":t[1]||(t[1]=function(e){return o.password=e})},null,512),[[n["vModelText"],o.password]]),o.error?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",v,Object(n["toDisplayString"])(o.error),1)):Object(n["createCommentVNode"])("",!0),O],32)],64)}var h=r("1da1"),g=(r("96cf"),r("260b")),w=(r("e71f"),r("ea7b"),{apiKey:"AIzaSyCHWfygCk07-K-nbtT2mDwjFfOFQyggbhw",authDomain:"vue-blog-system-67c9b.firebaseapp.com",projectId:"vue-blog-system-67c9b",storageBucket:"vue-blog-system-67c9b.appspot.com",messagingSenderId:"250998634396",appId:"1:250998634396:web:1369c8827e777b40f4fa59"});g["a"].initializeApp(w);var y=g["a"].firestore(),k=g["a"].firestore.FieldValue.serverTimestamp,E=g["a"].auth(),N=r("7a23"),V=N.ref,x=V(null),B=function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.signInWithEmailAndPassword(t,r);case 3:if(n=e.sent,n){e.next=6;break}throw new Error("can't login account");case 6:return e.abrupt("return",n);case 9:e.prev=9,e.t0=e["catch"](0),x.value=e.t0.message;case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,r){return e.apply(this,arguments)}}(),C=function(){return{error:x,signIn:B}},S=C,D={setup:function(e,t){var r=Object(d["r"])(""),n=Object(d["r"])(""),o=S(),a=o.error,c=o.signIn,u=function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c(r.value,n.value);case 2:o=e.sent,o&&t.emit("enterChatroom");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{email:r,password:n,login:u,error:a}}};D.render=j;var U=D,F=Object(n["createElementVNode"])("h2",null,"Sign Up",-1),M={key:0,class:"error"},R=Object(n["createElementVNode"])("button",null,"Sign Up",-1);function T(e,t,r,o,a,c){return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,[F,Object(n["createElementVNode"])("form",{onSubmit:t[3]||(t[3]=Object(n["withModifiers"])((function(){return o.signUp&&o.signUp.apply(o,arguments)}),["prevent"]))},[Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{type:"text",placeholder:"display name","onUpdate:modelValue":t[0]||(t[0]=function(e){return o.displayName=e})},null,512),[[n["vModelText"],o.displayName]]),Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{type:"email",placeholder:"email","onUpdate:modelValue":t[1]||(t[1]=function(e){return o.email=e})},null,512),[[n["vModelText"],o.email]]),Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{type:"password",placeholder:"password","onUpdate:modelValue":t[2]||(t[2]=function(e){return o.password=e})},null,512),[[n["vModelText"],o.password]]),o.error?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",M,Object(n["toDisplayString"])(o.error),1)):Object(n["createCommentVNode"])("",!0),R],32)],64)}var _=Object(n["ref"])(null),L=function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t,r,n){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.createUserWithEmailAndPassword(t,r);case 3:if(o=e.sent,o){e.next=6;break}throw new Error("could not create new user");case 6:return o.user.updateProfile({displayName:n}),e.abrupt("return",o);case 10:e.prev=10,e.t0=e["catch"](0),_.value=e.t0.message;case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,r,n){return e.apply(this,arguments)}}(),P=function(){return{error:_,createAccount:L}},A=P,I={setup:function(e,t){var r=Object(d["r"])(""),n=Object(d["r"])(""),o=Object(d["r"])(""),a=A(),c=a.error,u=a.createAccount,l=function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u(n.value,o.value,r.value);case 2:a=e.sent,a&&t.emit("enterChatroom");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{displayName:r,email:n,password:o,signUp:l,error:c}}};I.render=T;var W=I,K={components:{Login:U,SignUp:W},setup:function(){var e=Object(d["r"])(!0),t=Object(u["c"])(),r=function(){t.push({name:"Chatroom"})};return{showLoginForm:e,enterChatroom:r}}};r("78fd");K.render=b;var H=K,z={class:"container"};function J(e,t,r,o,a,c){var u=Object(n["resolveComponent"])("Navbar"),l=Object(n["resolveComponent"])("ChatWindow"),i=Object(n["resolveComponent"])("NewChatForm");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",z,[Object(n["createVNode"])(u),Object(n["createVNode"])(l),Object(n["createVNode"])(i)])}r("b0c0");var Q={class:"chat-window"},q={class:"messages",ref:"msgBox"},G={class:"created-at"},X={class:"name"},Y={class:"mesage"};function Z(e,t,r,o,a,c){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Q,[Object(n["createElementVNode"])("div",q,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(o.formattedMessages,(function(e){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{class:"single",key:e.id},[Object(n["createElementVNode"])("span",G,Object(n["toDisplayString"])(e.created_at),1),Object(n["createElementVNode"])("span",X,Object(n["toDisplayString"])(e.name),1),Object(n["createElementVNode"])("span",Y,Object(n["toDisplayString"])(e.message),1)])})),128))],512)])}var $=r("5530"),ee=(r("d81d"),r("159b"),r("ef1b")),te=r("5c40"),re={setup:function(){var e=Object(d["r"])([]),t=Object(d["r"])(null);Object(te["sb"])((function(){t.value.scrollTop=t.value.scrollHeight}));var r=Object(d["c"])((function(){return e.value.map((function(e){var t=Object(ee["a"])(e.created_at.toDate());return Object($["a"])(Object($["a"])({},e),{},{created_at:t})}))}));return y.collection("messages").orderBy("created_at").onSnapshot((function(t){var r=[];t.docs.forEach((function(e){var t=Object($["a"])(Object($["a"])({},e.data()),{},{id:e.id});e.data().created_at&&r.push(t)})),e.value=r})),{messages:e,formattedMessages:r,msgBox:t}}};r("140f");re.render=Z;var ne=re;function oe(e,t,r,o,a,c){return Object(n["openBlock"])(),Object(n["createElementBlock"])("form",null,[Object(n["withDirectives"])(Object(n["createElementVNode"])("textarea",{placeholder:"text message and hit enter send","onUpdate:modelValue":t[0]||(t[0]=function(e){return o.message=e}),onKeypress:t[1]||(t[1]=Object(n["withKeys"])((function(){return o.handleSubmit&&o.handleSubmit.apply(o,arguments)}),["enter"]))},null,544),[[n["vModelText"],o.message]])])}var ae=Object(d["r"])(E.currentUser);E.onAuthStateChanged((function(e){console.log("user state change.current user is",e),ae.value=e}));var ce=function(){return{user:ae}},ue=ce,le=function(e){var t=Object(d["r"])(null),r=function(){var r=Object(h["a"])(regeneratorRuntime.mark((function r(n){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,y.collection(e).add(n);case 3:r.next=9;break;case 5:r.prev=5,r.t0=r["catch"](0),console.log(r.t0.message),t.value="could not send the message";case 9:case"end":return r.stop()}}),r,null,[[0,5]])})));return function(e){return r.apply(this,arguments)}}();return{error:t,addDoc:r}},ie=le,se={setup:function(){var e=Object(d["r"])(""),t=ue(),r=t.user,n=ie("messages"),o=(n.error,n.addDoc),a=function(){var t=Object(h["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={message:e.value,name:r.value.displayName,created_at:k()},t.next=3,o(n);case 3:e.value="";case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return{message:e,handleSubmit:a}}};r("171b");se.render=oe;var pe=se,me={key:0},be={class:"email"};function de(e,t,r,o,a,c){return o.user?(Object(n["openBlock"])(),Object(n["createElementBlock"])("nav",me,[Object(n["createElementVNode"])("div",null,[Object(n["createElementVNode"])("p",null,"Hi "+Object(n["toDisplayString"])(o.user.displayName),1),Object(n["createElementVNode"])("p",be,"logged in as "+Object(n["toDisplayString"])(o.user.email),1)]),Object(n["createElementVNode"])("button",{onClick:t[0]||(t[0]=function(){return o.logout&&o.logout.apply(o,arguments)})},"logout")])):Object(n["createCommentVNode"])("",!0)}var fe={setup:function(){var e=Object(d["r"])(null),t=ue(),r=t.user,n=function(){var t=Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,E.signOut();case 3:console.log("user logged out"),t.next=10;break;case 6:t.prev=6,t.t0=t["catch"](0),e.value=t.t0.message,console.log(t.t0.value);case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(){return t.apply(this,arguments)}}();return{logout:n,user:r}}};r("45ba");fe.render=de;var ve=fe,Oe={components:{ChatWindow:ne,NewChatForm:pe,Navbar:ve},setup:function(){var e=ue(),t=e.user,r=Object(u["c"])();Object(n["watch"])(t,(function(){t.value||r.push("/")}))}};Oe.render=J;var je,he=Oe,ge=[{path:"/",name:"Welcome",component:H,beforeEnter:function(e,t,r){var n=E.currentUser;n?r({name:"Chatroom"}):r()}},{path:"/chatroom",name:"Chatroom",component:he,beforeEnter:function(e,t,r){var n=E.currentUser;n?r():r({name:"Welcome"})}}],we=Object(u["a"])({history:Object(u["b"])("/"),routes:ge}),ye=we;r("150b");E.onAuthStateChanged((function(){je||(je=Object(n["createApp"])(c).use(ye).mount("#app"))}))},"78fd":function(e,t,r){"use strict";r("7a27")},"7a27":function(e,t,r){},"8d0f":function(e,t,r){},bb9e:function(e,t,r){},e51e:function(e,t,r){}});
//# sourceMappingURL=app.62ca7991.js.map